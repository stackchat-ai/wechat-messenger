var objectKeys=require("../object-keys/index.js"),isArguments=require("../is-arguments/index.js"),is=require("../object-is/index.js"),isRegex=require("../is-regex/index.js"),flags=require("../regexp.prototype.flags/index.js"),isDate=require("../is-date-object/index.js"),getTime=Date.prototype.getTime;function deepEqual(e,r,t){var i=t||{};return!(i.strict?!is(e,r):e!==r)||(!e||!r||"object"!=typeof e&&"object"!=typeof r?i.strict?is(e,r):e==r:objEquiv(e,r,i))}function isUndefinedOrNull(e){return null==e}function isBuffer(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(0<e.length&&"number"!=typeof e[0]))}function objEquiv(e,r,t){var i,n;if(typeof e!=typeof r)return!1;if(isUndefinedOrNull(e)||isUndefinedOrNull(r))return!1;if(e.prototype!==r.prototype)return!1;if(isArguments(e)!==isArguments(r))return!1;var u=isRegex(e),f=isRegex(r);if(u!==f)return!1;if(u||f)return e.source===r.source&&flags(e)===flags(r);if(isDate(e)&&isDate(r))return getTime.call(e)===getTime.call(r);var s=isBuffer(e),o=isBuffer(r);if(s!==o)return!1;if(s||o){if(e.length!==r.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==r[i])return!1;return!0}if(typeof e!=typeof r)return!1;try{var l=objectKeys(e),g=objectKeys(r)}catch(e){return!1}if(l.length!==g.length)return!1;for(l.sort(),g.sort(),i=l.length-1;0<=i;i--)if(l[i]!=g[i])return!1;for(i=l.length-1;0<=i;i--)if(!deepEqual(e[n=l[i]],r[n],t))return!1;return!0}module.exports=deepEqual;