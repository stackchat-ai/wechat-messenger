var getDayOfYear=require("../get_day_of_year/index.js"),getISOWeek=require("../get_iso_week/index.js"),getISOYear=require("../get_iso_year/index.js"),parse=require("../parse/index.js"),isValid=require("../is_valid/index.js"),enLocale=require("../locale/en/index.js");function format(e,t,r){var n=t?String(t):"YYYY-MM-DDTHH:mm:ss.SSSZ",o=(r||{}).locale,a=enLocale.format.formatters,i=enLocale.format.formattingTokensRegExp;o&&o.format&&o.format.formatters&&(a=o.format.formatters,o.format.formattingTokensRegExp&&(i=o.format.formattingTokensRegExp));var u=parse(e);return isValid(u)?buildFormatFn(n,a,i)(u):"Invalid Date"}var formatters={M:function(e){return e.getMonth()+1},MM:function(e){return addLeadingZeros(e.getMonth()+1,2)},Q:function(e){return Math.ceil((e.getMonth()+1)/3)},D:function(e){return e.getDate()},DD:function(e){return addLeadingZeros(e.getDate(),2)},DDD:function(e){return getDayOfYear(e)},DDDD:function(e){return addLeadingZeros(getDayOfYear(e),3)},d:function(e){return e.getDay()},E:function(e){return e.getDay()||7},W:function(e){return getISOWeek(e)},WW:function(e){return addLeadingZeros(getISOWeek(e),2)},YY:function(e){return addLeadingZeros(e.getFullYear(),4).substr(2)},YYYY:function(e){return addLeadingZeros(e.getFullYear(),4)},GG:function(e){return String(getISOYear(e)).substr(2)},GGGG:function(e){return getISOYear(e)},H:function(e){return e.getHours()},HH:function(e){return addLeadingZeros(e.getHours(),2)},h:function(e){var t=e.getHours();return 0===t?12:12<t?t%12:t},hh:function(e){return addLeadingZeros(formatters.h(e),2)},m:function(e){return e.getMinutes()},mm:function(e){return addLeadingZeros(e.getMinutes(),2)},s:function(e){return e.getSeconds()},ss:function(e){return addLeadingZeros(e.getSeconds(),2)},S:function(e){return Math.floor(e.getMilliseconds()/100)},SS:function(e){return addLeadingZeros(Math.floor(e.getMilliseconds()/10),2)},SSS:function(e){return addLeadingZeros(e.getMilliseconds(),3)},Z:function(e){return formatTimezone(e.getTimezoneOffset(),":")},ZZ:function(e){return formatTimezone(e.getTimezoneOffset())},X:function(e){return Math.floor(e.getTime()/1e3)},x:function(e){return e.getTime()}};function buildFormatFn(e,t,r){var n,o,a=e.match(r),i=a.length;for(n=0;n<i;n++)o=t[a[n]]||formatters[a[n]],a[n]=o||removeFormattingTokens(a[n]);return function(e){for(var t="",r=0;r<i;r++)a[r]instanceof Function?t+=a[r](e,formatters):t+=a[r];return t}}function removeFormattingTokens(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|]$/g,""):e.replace(/\\/g,"")}function formatTimezone(e,t){t=t||"";var r=0<e?"-":"+",n=Math.abs(e),o=n%60;return r+addLeadingZeros(Math.floor(n/60),2)+t+addLeadingZeros(o,2)}function addLeadingZeros(e,t){for(var r=Math.abs(e).toString();r.length<t;)r="0"+r;return r}module.exports=format;