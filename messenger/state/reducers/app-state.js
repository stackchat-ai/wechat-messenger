"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};exports.default=AppStateReducer;var _appState=require("../actions/app-state.js"),AppStateActions=_interopRequireWildcard(_appState),_common=require("../actions/common.js"),_conversation=require("../actions/conversation.js"),_app=require("../constants/app.js"),_connectionState=require("../constants/connection-state.js");function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var INITIAL_STATE={isInitialized:!1,uploadVisible:!1,settingsVisible:!1,visibleChannelCategory:null,widgetState:_app.WIDGET_STATE.INIT,widgetSize:"md",connectNotificationTimestamp:null,errorNotificationMessage:null,introHeight:158,showAnimation:!1,isFetchingMoreMessages:!1,shouldScrollToBottom:!0,typingIndicatorShown:!1,typingIndicatorAvatarUrl:null,typingIndicatorName:null,typingIndicatorTimeoutId:null,userIsTyping:!1,isRecording:!1,connectionState:_connectionState.CONNECTION_STATE.DISCONNECTED};function AppStateReducer(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:INITIAL_STATE,t=arguments[1];switch(t.type){case _common.RESET:return _extends({},INITIAL_STATE,{widgetSize:e.widgetSize});case _conversation.RESET_CONVERSATION:return _extends({},e,{connectNotificationTimestamp:null});case AppStateActions.SET_INITIALIZATION_STATE:return _extends({},e,{isInitialized:t.value});case AppStateActions.ENABLE_IMAGE_UPLOAD:return _extends({},e,{imageUploadEnabled:!0});case AppStateActions.DISABLE_IMAGE_UPLOAD:return _extends({},e,{imageUploadEnabled:!1});case AppStateActions.ENABLE_SOUND_NOTIFICATION:return _extends({},e,{soundNotificationEnabled:!0});case AppStateActions.DISABLE_SOUND_NOTIFICATION:return _extends({},e,{soundNotificationEnabled:!1});case AppStateActions.SET_EMAIL_READONLY:return _extends({},e,{readOnlyEmail:!0});case AppStateActions.UNSET_EMAIL_READONLY:return _extends({},e,{readOnlyEmail:!1});case AppStateActions.TOGGLE_WIDGET:return _extends({},e,{widgetState:e.widgetState===_app.WIDGET_STATE.OPENED?_app.WIDGET_STATE.CLOSED:_app.WIDGET_STATE.OPENED,settingsVisible:e.settingsVisible&&e.widgetState!==_app.WIDGET_STATE.OPENED,showAnimation:!0});case AppStateActions.OPEN_WIDGET:return _extends({},e,{widgetState:_app.WIDGET_STATE.OPENED,showAnimation:!0});case AppStateActions.CLOSE_WIDGET:return _extends({},e,{visibleChannelCategory:null,widgetState:_app.WIDGET_STATE.CLOSED,settingsVisible:!1,showAnimation:!0});case AppStateActions.SHOW_UPLOAD:return _extends({},e,{uploadVisible:!0});case AppStateActions.HIDE_UPLOAD:return _extends({},e,{uploadVisible:!1});case AppStateActions.SHOW_SETTINGS:return _extends({},e,{settingsVisible:!0});case AppStateActions.HIDE_SETTINGS:return _extends({},e,{settingsVisible:!1});case AppStateActions.SHOW_CHANNEL_PAGE:return _extends({},e,{visibleChannelCategory:t.channelType});case AppStateActions.HIDE_CHANNEL_PAGE:return _extends({},e,{visibleChannelCategory:void 0});case AppStateActions.SHOW_CONNECT_NOTIFICATION:return _extends({},e,{connectNotificationTimestamp:t.timestamp});case AppStateActions.HIDE_CONNECT_NOTIFICATION:return _extends({},e,{connectNotificationTimestamp:null});case AppStateActions.SHOW_ERROR_NOTIFICATION:return _extends({},e,{errorNotificationMessage:t.message});case AppStateActions.HIDE_ERROR_NOTIFICATION:return _extends({},e,{errorNotificationMessage:null});case AppStateActions.SET_EMBEDDED:return _extends({},e,{widgetState:t.value?_app.WIDGET_STATE.EMBEDDED:_app.WIDGET_STATE.INIT,widgetSize:t.value?"embedded":e.widgetSize});case AppStateActions.SET_INTRO_HEIGHT:return _extends({},e,{introHeight:t.value});case AppStateActions.DISABLE_ANIMATION:return _extends({},e,{showAnimation:!1});case AppStateActions.SET_FETCHING_MORE_MESSAGES:return _extends({},e,{isFetchingMoreMessages:t.value});case AppStateActions.SET_SHOULD_SCROLL_TO_BOTTOM:return _extends({},e,{shouldScrollToBottom:t.value});case AppStateActions.SHOW_TYPING_INDICATOR:return _extends({},e,{typingIndicatorShown:!0,typingIndicatorAvatarUrl:t.avatarUrl,typingIndicatorName:t.name,typingIndicatorTimeoutId:t.timeoutId});case AppStateActions.HIDE_TYPING_INDICATOR:return _extends({},e,{typingIndicatorShown:!1,typingIndicatorName:null,typingIndicatorAvatarUrl:null,typingIndicatorTimeoutId:null});case _conversation.ADD_MESSAGE:return"businessSystem"===t.message.role?_extends({},e,{typingIndicatorShown:!1,typingIndicatorName:null,typingIndicatorAvatarUrl:null,typingIndicatorTimeoutId:null}):e;case AppStateActions.UPDATE_WIDGET_SIZE:return _extends({},e,{widgetSize:t.size});case AppStateActions.OPEN_SPEECH_RECOGNITION_MODAL:return _extends({},e,{speechRecognitionModalOpen:!0});case AppStateActions.CLOSE_SPEECH_RECOGNITION_MODAL:return _extends({},e,{speechRecognitionModalOpen:!1});case AppStateActions.SET_USER_IS_TYPING:return _extends({},e,{userIsTyping:t.isTyping});case AppStateActions.SET_CONNECTION_STATE:return _extends({},e,{connectionState:t.connectionState});default:return e;case AppStateActions.UPDATE_RECORDING_STATE:return _extends({},e,{isRecording:t.isRecording})}}