"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UPDATE_RECORDING_STATE=exports.SET_CONNECTION_STATE=exports.SET_USER_IS_TYPING=exports.CLOSE_SPEECH_RECOGNITION_MODAL=exports.OPEN_SPEECH_RECOGNITION_MODAL=exports.SET_INITIALIZATION_STATE=exports.UPDATE_WIDGET_SIZE=exports.HIDE_TYPING_INDICATOR=exports.SHOW_TYPING_INDICATOR=exports.SET_SHOULD_SCROLL_TO_BOTTOM=exports.SET_FETCHING_MORE_MESSAGES=exports.DISABLE_ANIMATION=exports.SET_INTRO_HEIGHT=exports.HIDE_CHANNEL_PAGE=exports.SHOW_CHANNEL_PAGE=exports.DISABLE_IMAGE_UPLOAD=exports.ENABLE_IMAGE_UPLOAD=exports.SET_EMBEDDED=exports.UNSET_EMAIL_READONLY=exports.SET_EMAIL_READONLY=exports.HIDE_ERROR_NOTIFICATION=exports.SHOW_ERROR_NOTIFICATION=exports.HIDE_CONNECT_NOTIFICATION=exports.SHOW_CONNECT_NOTIFICATION=exports.HIDE_SETTINGS=exports.SHOW_SETTINGS=exports.HIDE_UPLOAD=exports.SHOW_UPLOAD=exports.DISABLE_SOUND_NOTIFICATION=exports.ENABLE_SOUND_NOTIFICATION=exports.DISABLE_SETTINGS=exports.ENABLE_SETTINGS=exports.CLOSE_WIDGET=exports.OPEN_WIDGET=void 0,exports.toggleWidget=toggleWidget,exports.openWidget=openWidget,exports.closeWidget=closeWidget,exports.showUpload=showUpload,exports.hideUpload=hideUpload,exports.showSettings=showSettings,exports.setInitializationState=setInitializationState,exports.hideSettings=hideSettings,exports.enableImageUpload=enableImageUpload,exports.disableImageUpload=disableImageUpload,exports.enableSoundNotification=enableSoundNotification,exports.disableSoundNotification=disableSoundNotification,exports.setEmailReadonly=setEmailReadonly,exports.unsetEmailReadonly=unsetEmailReadonly,exports.showConnectNotification=showConnectNotification,exports.hideConnectNotification=hideConnectNotification,exports.showErrorNotification=showErrorNotification,exports.hideErrorNotification=hideErrorNotification,exports.setEmbedded=setEmbedded,exports.showChannelPage=showChannelPage,exports.hideChannelPage=hideChannelPage,exports.setIntroHeight=setIntroHeight,exports.disableAnimation=disableAnimation,exports.setFetchingMoreMessages=setFetchingMoreMessages,exports.setShouldScrollToBottom=setShouldScrollToBottom,exports.showTypingIndicator=showTypingIndicator,exports.hideTypingIndicator=hideTypingIndicator,exports.updateWidgetSize=updateWidgetSize,exports.openSpeechRecognitionModal=openSpeechRecognitionModal,exports.closeSpeechRecognitionModal=closeSpeechRecognitionModal,exports.setUserIsTyping=setUserIsTyping,exports.setRecordingState=setRecordingState,exports.setConnectionState=setConnectionState;var _events=require("../../utils/events.js"),_app=require("../constants/app.js"),_connectionState=require("../constants/connection-state.js"),OPEN_WIDGET=exports.OPEN_WIDGET="OPEN_WIDGET",CLOSE_WIDGET=exports.CLOSE_WIDGET="CLOSE_WIDGET",ENABLE_SETTINGS=exports.ENABLE_SETTINGS="ENABLE_SETTINGS",DISABLE_SETTINGS=exports.DISABLE_SETTINGS="DISABLE_SETTINGS",ENABLE_SOUND_NOTIFICATION=exports.ENABLE_SOUND_NOTIFICATION="ENABLE_SOUND_NOTIFICATION",DISABLE_SOUND_NOTIFICATION=exports.DISABLE_SOUND_NOTIFICATION="DISABLE_SOUND_NOTIFICATION",SHOW_UPLOAD=exports.SHOW_UPLOAD="SHOW_UPLOAD",HIDE_UPLOAD=exports.HIDE_UPLOAD="HIDE_UPLOAD",SHOW_SETTINGS=exports.SHOW_SETTINGS="SHOW_SETTINGS",HIDE_SETTINGS=exports.HIDE_SETTINGS="HIDE_SETTINGS",SHOW_CONNECT_NOTIFICATION=exports.SHOW_CONNECT_NOTIFICATION="SHOW_CONNECT_NOTIFICATION",HIDE_CONNECT_NOTIFICATION=exports.HIDE_CONNECT_NOTIFICATION="HIDE_CONNECT_NOTIFICATION",SHOW_ERROR_NOTIFICATION=exports.SHOW_ERROR_NOTIFICATION="SHOW_ERROR_NOTIFICATION",HIDE_ERROR_NOTIFICATION=exports.HIDE_ERROR_NOTIFICATION="HIDE_ERROR_NOTIFICATION",SET_EMAIL_READONLY=exports.SET_EMAIL_READONLY="SET_EMAIL_READONLY",UNSET_EMAIL_READONLY=exports.UNSET_EMAIL_READONLY="UNSET_EMAIL_READONLY",SET_EMBEDDED=exports.SET_EMBEDDED="SET_EMBEDDED",ENABLE_IMAGE_UPLOAD=exports.ENABLE_IMAGE_UPLOAD="ENABLE_IMAGE_UPLOAD",DISABLE_IMAGE_UPLOAD=exports.DISABLE_IMAGE_UPLOAD="DISABLE_IMAGE_UPLOAD",SHOW_CHANNEL_PAGE=exports.SHOW_CHANNEL_PAGE="SHOW_CHANNEL_PAGE",HIDE_CHANNEL_PAGE=exports.HIDE_CHANNEL_PAGE="HIDE_CHANNEL_PAGE",SET_INTRO_HEIGHT=exports.SET_INTRO_HEIGHT="SET_INTRO_HEIGHT",DISABLE_ANIMATION=exports.DISABLE_ANIMATION="DISABLE_ANIMATION",SET_FETCHING_MORE_MESSAGES=exports.SET_FETCHING_MORE_MESSAGES="SET_FETCHING_MORE_MESSAGES",SET_SHOULD_SCROLL_TO_BOTTOM=exports.SET_SHOULD_SCROLL_TO_BOTTOM="SET_SHOULD_SCROLL_TO_BOTTOM",SHOW_TYPING_INDICATOR=exports.SHOW_TYPING_INDICATOR="SHOW_TYPING_INDICATOR",HIDE_TYPING_INDICATOR=exports.HIDE_TYPING_INDICATOR="HIDE_TYPING_INDICATOR",UPDATE_WIDGET_SIZE=exports.UPDATE_WIDGET_SIZE="UPDATE_WIDGET_SIZE",SET_INITIALIZATION_STATE=exports.SET_INITIALIZATION_STATE="SET_INITIALIZATION_STATE",OPEN_SPEECH_RECOGNITION_MODAL=exports.OPEN_SPEECH_RECOGNITION_MODAL="OPEN_SPEECH_RECOGNITION_MODAL",CLOSE_SPEECH_RECOGNITION_MODAL=exports.CLOSE_SPEECH_RECOGNITION_MODAL="CLOSE_SPEECH_RECOGNITION_MODAL",SET_USER_IS_TYPING=exports.SET_USER_IS_TYPING="SET_USER_IS_TYPING",SET_CONNECTION_STATE=exports.SET_CONNECTION_STATE="SET_CONNECTION_STATE",UPDATE_RECORDING_STATE=exports.UPDATE_RECORDING_STATE="UPDATE_RECORDING_STATE";function toggleWidget(){return function(e,t){var E=t().appState.widgetState;if(E!==_app.WIDGET_STATE.EMBEDDED)return E===_app.WIDGET_STATE.OPENED?e(closeWidget()):e(openWidget())}}function openWidget(){return function(e,t){t().appState.widgetState!==_app.WIDGET_STATE.EMBEDDED&&(e({type:OPEN_WIDGET}),_events.observable.trigger("widget:opened"),e(resetUnreadCount()))}}function closeWidget(){return function(e,t){t().appState.widgetState!==_app.WIDGET_STATE.EMBEDDED&&(e({type:CLOSE_WIDGET}),_events.observable.trigger("widget:closed"),e(resetUnreadCount()))}}function showUpload(){return{type:SHOW_UPLOAD}}function hideUpload(){return{type:HIDE_UPLOAD}}function showSettings(){return{type:SHOW_SETTINGS}}function setInitializationState(e){return{type:SET_INITIALIZATION_STATE,value:e}}function hideSettings(){return{type:HIDE_SETTINGS}}function enableImageUpload(){return{type:ENABLE_IMAGE_UPLOAD}}function disableImageUpload(){return{type:DISABLE_IMAGE_UPLOAD}}function enableSoundNotification(){return{type:ENABLE_SOUND_NOTIFICATION}}function disableSoundNotification(){return{type:DISABLE_SOUND_NOTIFICATION}}function setEmailReadonly(){return{type:SET_EMAIL_READONLY}}function unsetEmailReadonly(){return{type:UNSET_EMAIL_READONLY}}function showConnectNotification(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Date.now()/1e3;return{type:SHOW_CONNECT_NOTIFICATION,timestamp:e}}function hideConnectNotification(){return{type:HIDE_CONNECT_NOTIFICATION}}function showErrorNotification(t){return function(e){setTimeout(function(){e(hideErrorNotification())},1e4),e({type:SHOW_ERROR_NOTIFICATION,message:t})}}function hideErrorNotification(){return{type:HIDE_ERROR_NOTIFICATION}}function setEmbedded(e){return{type:SET_EMBEDDED,value:e}}function showChannelPage(O){return function(e,t){var E=t(),o=E.user,I=E.config.integrations,_=CHANNEL_DETAILS[O],T=isChannelLinked(o.clients,O),n=getIntegration(I,O),N=_.getURL(n);return N&&(!_.Component||T)?(window.open(N),!T&&_.isLinkable?e(subscribeIot()):void 0):(e({type:SHOW_CHANNEL_PAGE,channelType:O}),e(_.onChannelPage()))}}function hideChannelPage(){return{type:HIDE_CHANNEL_PAGE}}function setIntroHeight(e){return{type:SET_INTRO_HEIGHT,value:e}}function disableAnimation(){return{type:DISABLE_ANIMATION}}function setFetchingMoreMessages(e){return{type:SET_FETCHING_MORE_MESSAGES,value:e}}function setShouldScrollToBottom(e){return{type:SET_SHOULD_SCROLL_TO_BOTTOM,value:e}}function showTypingIndicator(e){var I=e.avatarUrl,_=e.name;return function(e,t){var E=t().appState.typingIndicatorTimeoutId;E&&clearTimeout(E);var o=setTimeout(function(){e(hideTypingIndicator())},1e4);e({type:SHOW_TYPING_INDICATOR,avatarUrl:I,name:_,timeoutId:o})}}function hideTypingIndicator(){return function(e,t){var E=t().appState.typingIndicatorTimeoutId;E&&clearTimeout(E),e({type:HIDE_TYPING_INDICATOR})}}function updateWidgetSize(e){return{type:UPDATE_WIDGET_SIZE,size:e}}function openSpeechRecognitionModal(){return{type:OPEN_SPEECH_RECOGNITION_MODAL}}function closeSpeechRecognitionModal(){return{type:CLOSE_SPEECH_RECOGNITION_MODAL}}function setUserIsTyping(e){return{isTyping:e,type:SET_USER_IS_TYPING}}function setRecordingState(e){return{isRecording:e,type:UPDATE_RECORDING_STATE}}var wasEverConnected=!1;function setConnectionState(o){return function(e,t){var E=t().appState.connectionState===_connectionState.CONNECTION_STATE.CONNECTED;switch(o){case _connectionState.CONNECTION_STATE.CONNECTED:E&&wasEverConnected||_events.observable.trigger("connected"),wasEverConnected=!0;break;case _connectionState.CONNECTION_STATE.DISCONNECTED:case _connectionState.CONNECTION_STATE.DISCONNECTED_WITH_RETRY:E&&_events.observable.trigger("disconnected")}e({type:SET_CONNECTION_STATE,connectionState:o})}}