"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneMessage=void 0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};exports.isSupportedMessageType=isSupportedMessageType,exports.isSupportedActionType=isSupportedActionType,exports.filterClientProps=filterClientProps,exports.executeAction=executeAction;var _index=require("../../npm/lodash.omit/index.js"),_index2=_interopRequireDefault(_index),_message=require("../state/constants/message.js"),_conversation=require("../state/actions/conversation.js"),_webview=require("../state/actions/webview.js");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function isSupportedMessageType(e){return Object.values(_message.MESSAGE_TYPES).includes(e)}function isSupportedActionType(e){return Object.values(_message.ACTION_TYPES).includes(e)}function filterClientProps(e){return(0,_index2.default)(e,["_clientId","_clientSent","firstInGroup","firstMessageOfDay","lastInGroup","shouldShowAuthor","shouldShowAvatar"])}function executeAction(e,t){var n=t.id,o=t.type,r=t.size,s=t.uri;return"link"===o?window.open(s,"_blank"):"postback"===o?e((0,_conversation.sendPostback)(n)):"webview"===o?e((0,_webview.showWebview)({uri:s,size:r})):void 0}function oneLevelClone(t,n){var o=_extends({},t);return Object.keys(t).forEach(function(e){n[e]?o[e]=n[e](t[e]):"object"===_typeof(t[e])&&(o[e]=_extends({},t[e]))}),o}function cloneItem(e){return oneLevelClone(e,{actions:function(e){return e.map(oneLevelClone)}})}function cloneMessage(e){return oneLevelClone(e,{actions:function(e){return e.map(oneLevelClone)},items:function(e){return e.map(cloneItem)}})}exports.cloneMessage=cloneMessage;